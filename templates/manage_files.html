<!DOCTYPE html>
<html lang="en">

<head>
    <title>Magen File Display</title>
    <div>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://getbootstrap.com/docs/3.3/examples/jumbotron-narrow/jumbotron-narrow.css" rel="stylesheet">
    </div>
</head>
<style>
  dd {
  margin-left: 0.5cm;
  }
</style>

<script language="JavaScript">
function toggle(source) {
  checkboxes = document.getElementsByName('file');
  for(var i=0, n=checkboxes.length;i<n;i++) {
    checkboxes[i].checked = source.checked;
  }
}
</script>

<body>
  <div class="container">

      <div align="right">
          <form>
            <input type="submit" formaction="/" value="Home">
            <input type="submit" formaction="/logout/" value="Logout">
        </form>
      </div>

    <div>
      <h3 class="text-muted">Magen Local Agent (Demo version 0.1)</h3>
    </div>
    <p>
      Magen Agent represent a native local Agent that performs Encryption and Decryption Data
      that will be stored in a Cloud Application (Box, Dropbox, GoogleDrive).
      Magen Agent showcases an ability to share an encrypted file between User1 and User2.
      User2 receives an encrypted file and attempts to open it. If access is granted, file is decrypted.
      If no decrypt operation performed, the User unable to open a file.
    </p>

    <form method="POST">
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <ul class=flashes>
                    {% for message in messages %}
                        <li>{{ message }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endwith %}
        <div class="row">
            <input type="checkbox" onClick="toggle(this)" />
            <input type="submit" formaction="/magen/ingestion/v2/delete_files/" value="Delete">
            <input type="submit" formaction="/magen/ingestion/v2/delete_all/" value="Delete All">
        </div>
        <div classs="row">
            {% if (data)  %}
            <ul>
                {% for value in data %}
                {% if value %}
                <li><input type="checkbox" name="file" value="{{value.metadata.asset_uuid}}">
                    <span>{{ value.filename}}</span>
                </li>
                {%  endif %}
                {% endfor %}
            </ul>
            {%  endif %}
        </div>

    </form>
  </div>
</body>
</html>